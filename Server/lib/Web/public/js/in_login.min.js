/**
Rule the words! KKuTu Online
Copyright (C) 2017 JJoriping(op@jjo.kr)

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program. If not, see <http://www.gnu.org/licenses/>.
*/

!function(){$(document).ready(function(){function a(a){if(g){var b=a.getAuthResponse(!0);console.log(b),$.post("/login/google",{it:b.id_token,at:b.access_token},c)}}function b(a){g&&alert(JSON.stringify(a))}function c(a){return a.error?alert("ERROR "+a.error):void d("/register")}function d(a){$.post("/session/set",{bm:$.cookie("bm")},function(b){$.cookie("prevpage",document.referrer),location.href=a})}var e,f=setInterval(function(){if(FB){try{FB.getLoginStatus(function(a){e=a})}catch(a){return}clearInterval(f)}},400),g=!1,h=setInterval(function(){gapi&&(gapi.signin2.render("with-google",{scope:"profile email https://www.googleapis.com/auth/plus.login",width:210,height:35,longtitle:!0,onsuccess:a,onfailure:b}),clearInterval(h))},400);$(".with-naver").on("click",function(a){var b="https://nid.naver.com/oauth2.0/authorize?";b+="response_type=code&",b+="client_id=????????????????&",b+="redirect_uri="+encodeURI("http://kkutu.kr")+"&",b+="state="+encodeURI($("#stateKey").html())+"&",d(b)}),$(".with-facebook").on("click",function(a){return FB?e?void("connected"==e.status?d("/?token="+e.authResponse.accessToken):FB.login(function(a){a.authResponse?d("/?token="+a.authResponse.accessToken):history.back()},{scope:"user_birthday"})):(FB.getLoginStatus(function(a){e=a}),void alert("Please wait... (2)")):void alert("Please wait... (1)")}),$("#with-google").on("click",function(a){g=!0})})}();