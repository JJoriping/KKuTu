/*!
 * Rule the words! KKuTu Online
 * Copyright (C) 2017 JJoriping(op@jjo.kr)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */!function(){var e,r;function s(){$.get("/servers",(function(s){var a=0;e.list.empty(),r=s.list,s.list.forEach((function(r,s){var t,i=null===r?"x":"o",n="x"==i?"-":r+" / 400",l=r/400*100;a+=r||0,"o"==i&&(l>=99?i="q":l>=90&&(i="p")),e.list.append(t=$("<div>").addClass("server").attr("id","server-"+s).append($("<div>").addClass("server-status ss-"+i)).append($("<div>").addClass("server-name").html(L["server_"+s])).append($("<div>").addClass("server-people graph").append($("<div>").addClass("graph-bar").width(l+"%")).append($("<label>").html(n))).append($("<div>").addClass("server-enter").html(L.serverEnter))),"x"!=i?t.on("click",(function(e){location.href="/?server="+s})):t.children(".server-enter").html("-")})),e.total.html("&nbsp;"+L.TOTAL+" "+a+L.MN),e.refi.removeClass("fa-spin"),e.start.prop("disabled",!1)}))}$(document).ready((function(){e={list:$("#server-list"),total:$("#server-total"),start:$("#game-start"),ref:$("#server-refresh"),refi:$("#server-refresh>i")},$("#Background").attr("src","").addClass("jt-image").css({"background-image":"url(/img/kkutu/gamebg.png)","background-size":"200px 200px"}),e.start.prop("disabled",!0).on("click",(function(e){var s,a;if($("#account-info").html()===L.LOGIN)return $("#server-0").trigger("click");for(s=.9;s<1;s+=.01)for(a in r)if(r[a]<400*s)return void $("#server-"+a).trigger("click")})),e.ref.on("click",(function(r){if(e.refi.hasClass("fa-spin"))return alert(L.serverWait);e.refi.addClass("fa-spin"),setTimeout(s,1e3)})),setInterval((function(){e.ref.trigger("click")}),6e4),s()}))}();